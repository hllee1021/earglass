{% block body %}
<p style="text-align: right;">
  <input id="search-task" type="text" placeholder="ğŸ” íƒœìŠ¤í¬ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰">
</p>
<table class="table table-striped table-bordered" id="target-table-1">
    <thead>
        <th>Index</th>
        <th>ID</th>
        <th>ì—­í• </th>
        <th>ì„±ë³„</th>
        <th>ìƒë…„ì›”ì¼</th>
        <th>íœ´ëŒ€ì „í™”</th>
        <th>ì£¼ì†Œ</th>
        <th>ì°¸ì—¬ì¤‘ì¸ í…ŒìŠ¤í¬</th>
    </thead>
    <tbody>
      {% for user in users %}
        <tr>
            <td>
              {{ user['idUSER'] }}
            </td>
            <td>
              <!-- ì œì¶œìëŠ” admin/submitter.htmlë¡œ, í‰ê°€ìëŠ” admin/estimator.htmlë¡œ ì´ë™ -->
              <a href="/">{{ user['Name'] }}</a>
            </td>
            <td>
              {{ user['FK_UserTypeName'] }}
            </td>
            <td>
              {{ user['Gender'] }} 
            </td>
            <form>
                <td>
                  {{ user['BirthDate'] }} 
                </td>
                <td>
                  {{ user['PhoneNum'] }} 
                </td>
                <td>
                  {{ user['Address'] }} 
                </td>
                <td class="task">
                  {% for task in user['Tasks'] %}
                    <a href="task_info">{{ task['FK_TaskName'] }}</a>
                  {% endfor %}
                </td>
            </form>
          </tr>
        {% endfor %}
    </tbody>
</table>
<style>
    .wrap{
      width: 1000px;
      min-height: 300px;
      white-space:nowrap;
      overflow: auto;
    }
    #search-users {
        padding: 6px;
        outline: none;
    }
</style>
<script>
console.log("start")
// $('#search-task').on('change', (event) => {
//   const task_query = event.target.value
//   $('tbody tr').each((index, element) => {
//     let tasks = element.get
//     // if (tasks.includes(task_query)) {
//     //   $(element).show()
//     // } else {
//     //   $(element).hide()
//     // }
//   })
// })
$(document).ready(() => {
  $("#search-task").on('change', (event) => {
    const task_query = event.target.value;
    let rows = document.querySelectorAll("table#target-table-1 tbody tr")
    for (let i = 0; i < rows.length; i++) {
      row = rows[i];
      let ps = row.querySelectorAll("p")
      let tasks = []
      for (let j = 0; j < ps.length; j++) {
        tasks.push(ps[j].textContent)
      }
      console.log(tasks)
      if (tasks.includes(task_query) || !task_query) {
        $(row).show()
      } else {
        $(row).hide()
      }
    }
  })
})
</script>
{% endblock %}
